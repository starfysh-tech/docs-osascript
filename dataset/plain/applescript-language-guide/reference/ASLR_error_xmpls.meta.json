{
  "collection": "applescript-language-guide",
  "path": "reference/ASLR_error_xmpls.md",
  "title": "Working with Errors",
  "body": "<a id=\"//apple_ref/doc/uid/TP40000983-CH221-SW1\"></a>\n\n# Working with Errors\n\n<a id=\"//apple_ref/doc/uid/TP40000983-CH221-DontLinkElementID_915\"></a><a id=\"//apple_ref/doc/uid/TP40000983-CH221-DontLinkElementID_916\"></a>This appendix provides a detailed example of handling errors with [try Statements](ASLR_control_statements.md#//apple_ref/doc/uid/TP40000983-CH6g-128973) and [error Statements](ASLR_control_statements.md#//apple_ref/doc/uid/TP40000983-CH6g-129657). It shows how to use a `try` statement to check for bad data and other errors, and an `error` statement to pass on any error that can’t be handled. It also shows how to check for just a particular error number that you are interested in.\n\n<a id=\"//apple_ref/doc/uid/TP40000983-CH221-SW2\"></a>\n\n## Catching Errors in a Handler\n\nThe `SumIntegerList` handler expects a list of integers. If any item in the passed list is not an integer, `SumIntegerList` signals `error number 750` and returns 0. The handler includes an error handler that displays a dialog if the error number is equal to 750; if the error number is not equal to 750, the handler resignals the error with an `error` statement so that other statements in the call chain can handle the unknown error. <a id=\"//apple_ref/doc/uid/TP40000983-CH221-DontLinkElementID_917\"></a>If no statement handles the error, AppleScript displays an error dialog and execution stops.\n\n```\non SumIntegerList from itemList\n    try\n        -- Initialize return value.\n        set integerSum to 0\n        -- Before doing sum, check that all items in list are integers.\n        if ((count items in itemList) is not equal to ¬\n            (count integers in itemList)) then\n            -- If all items aren’t integers, signal an error.\n            error number 750\n        end if\n        -- Use a repeat statement to sum the integers in the list.\n        repeat with currentItem in itemList\n            set integerSum to integerSum + currentItem\n        end repeat\n        return integerSum -- Successful completion of handler.\n    on error errStr number errorNumber\n        -- If our own error number, warn about bad data.\n        if the errorNumber is equal to 750 then\n            display dialog \"All items in the list must be integers.\"\n            return integerSum -- Return the default value (0).\n        else\n            -- An unknown error occurred. Resignal, so the caller\n            -- can handle it, or AppleScript can display the number.\n            error errStr number errorNumber\n        end if\n    end try\nend SumIntegerList\n```\n\nThe `SumIntegerList` handler handles various error conditions. For example, the following call completes without error:\n\n```\nset sumList to {1, 3, 5}\nset listTotal to SumIntegerList from sumList --result: 9\n```\n\nThe following call passes bad data—the list contains an item that isn’t an integer:\n\n```\nset sumList to {1, 3, 5, \"A\"}\nset listTotal to SumIntegerList from sumList\nif listTotal is equal to 0 then\n    -- the handler didn’t total the list;\n    -- do something to handle the error (not shown)\nend if\n```\n\nThe `SumIntegerList` routine checks the list and signals an error 750 because the list contains at least one non-integer item. The routine’s error handler recognizes error number 750 and puts up a dialog to describe the problem. The `SumIntegerList` routine returns 0. The script checks the return value and, if it is equal to 0, does something to handle the error (not shown).\n\nSuppose some unknown error occurs while `SumIntegerList` is processing the integer list in the previous call. When the unknown error occurs, the `SumIntegerList` error handler calls the `error` command to resignal the error. Since the caller doesn’t handle it, AppleScript displays an error dialog and execution halts. The `SumIntegerList` routine does not return a value.\n\nFinally, suppose the caller has its own error handler, so that if the handler passes on an error, the caller can handle it. Assume again that an unknown error occurs while `SumIntegerList` is processing the integer list.\n\n```\ntry\n    set sumList to {1, 3, 5}\n    set listTotal to SumIntegerList from sumList\non error errMsg number errorNumber\n    display dialog \"An unknown error occurred:  \" & errorNumber as text\nend try\n```\n\nIn this case, when the unknown error occurs, the `SumIntegerList` error handler calls the `error` command to resignal the error. Because the caller has an error handler, it is able to handle the error by displaying a dialog that includes the error number. Execution can continue if it is meaningful to do so.\n\n<a id=\"//apple_ref/doc/uid/TP40000983-CH221-SW3\"></a>\n\n## Simplified Error Checking\n\nAppleScript provides a mechanism to streamline the way you can catch and handle individual errors. It is often necessary for a script to handle a particular error, but not others. It is possible to catch an error, check for the error number you are interested in, and use an error statement to resignal for other errors. For example:\n\n```\ntry\n    open for access file \"MyFolder:AddressData\" with write permission\non error msg number n from f to t partial result p\n    if n = -49 then -- File already open error\n        display dialog \"I'm sorry but the file is already open.\"\n    else\n        error msg number n from f to t partial result p\n    end if\nend try\n```\n\nThis script tries to open a file with write permission, but if the file is already opened, it just displays a dialog. However, you can instead implement this more concisely as:\n\n```\ntry\n    open for access file \"MyFolder:AddressData\" with write permission\non error number -49\n    display dialog \"I'm sorry but the file is already open.\"\nend try\n```\n\nIn this version, there is no need to list the `message`, `from`, `to`, or `partial result` parameters, in order to pass them along. If the error is not -49 (file &lt;name&gt; is already open), this error handler will not catch the error, and AppleScript will pass the error to the next handler in an outer scope.\n\nOne drawback to this approach is that you must use a literal constant for the error number in the `on error` parameter list. You can't use global variable or property names because the number must be known when the script is compiled.<a id=\"//apple_ref/doc/uid/TP40000983-CH221-DontLinkElementID_918\"></a>\n\n  \n\n---\n\nCopyright © 2016 Apple Inc. All Rights Reserved. [Terms of Use](http://www.apple.com/legal/internet-services/terms/site.html) | [Privacy Policy](http://www.apple.com/privacy/) | Updated: 2016-01-25\n",
  "binary": false,
  "source_url": "https://developer.apple.com/library/archive/documentation/AppleScript/Conceptual/AppleScriptLangGuide/reference/ASLR_error_xmpls.html",
  "sha256": "4c5c1272c48e8cdc3049d63767d963b534e01884bc4e775b7f8fbb87021d3aaa",
  "etag": null,
  "last_modified": null
}
