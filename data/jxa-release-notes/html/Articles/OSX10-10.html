<!DOCTYPE html>
<html lang="en">
<head>
<meta name="ROBOTS" content="NOINDEX, NOFOLLOW" />
    <title>OS X 10.10 Release Notes</title>
    <meta http-equiv="X-UA-Compatible" content="IE=7">
    <meta charset="utf-8">
    <meta id="book-resource-type" name="book-resource-type" content="Release Note">
    <meta scheme="apple_ref" id="identifier" name="identifier" content="//apple_ref/doc/uid/TP40014508">
    <meta id="document-version" name="document-version" content="2.0.11">
    <meta id="build" name="build" content="c1e4c7a89af8f899a21cfa81fc33ba42" />
    <meta id="chapterId" name="chapterId" content="TP40014508-CH109">
    <meta id="date" name="date" content="2015-09-16">
    <meta id="description" name="description" content="Describes late-breaking news and highlights of new or changed features in the latest release of JavaScript for Automation.">
    <meta id="book-title" name="book-title" content="JavaScript for Automation Release Notes">
    <meta id="book-root" name="book-root" content="../">
    <meta id="book-json" name="book-json" content="../book.json">
    <meta id="devcenter" name="devcenter" content="Mac Dev Center">
    <meta id="devcenter-url" name="devcenter-url" content="http://developer.apple.com/devcenter/mac">
    <meta id="reflib" name="reflib" content="Documentation Archive">
    <meta id="book-assignments" name="book-assignments" content="{Type/Release Note}, {Topic/Interapplication Communication}">
    
    
    <meta id="copyright" name="copyright" content="Copyright 2018 Apple Inc. All Rights Reserved.">
    <meta id="xcode-display" name="xcode-display" content="render">
    <meta id="IndexTitle" name="IndexTitle" content="JavaScript for Automation Release Notes: OS X 10.10 Release Notes">
    <meta id="resources-uri" name="resources-uri" content="../../../../Resources/1282">
    <link id="book-index-page" rel="Start" title="JavaScript for Automation Release Notes" type="text/html" href="../index.html">
    <link id="next-page" rel="Next" type="text/html" href="RevisionHistory.html">
    <link id="previous-page" rel="Prev" type="text/html" href="OSX10-11.html">
    <link rel="stylesheet" type="text/css" href="../../../../Resources/1282/CSS/screen.css">
    
    <!-- xcode_css -->
    <link rel="stylesheet" type="text/css" href="../../../../Resources/1282/CSS/feedback.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<meta id="platforms" name="platforms" content="">
</head>    
<body><a name="//apple_ref/doc/uid/TP40014508-CH109" title="OS X 10.10 Release Notes"></a>
    <div id="_omniture_top">
    <!-- SiteCatalyst code version: H.8. Copyright 1997-2006 Omniture, Inc. -->
    <script type="text/javascript">
    /* RSID: */
    var s_account="awdappledeveloper"
    </script>

    <script type="text/javascript" src="https://developer.apple.com/assets/metrics/scripts/analytics.js"></script>
    <script type="text/javascript">
    s.channel="www.documentationarchive.developer"

    /************* DO NOT ALTER ANYTHING BELOW THIS LINE ! **************/
    var s_code=s.t();if(s_code)document.write(s_code)</script>
    <!-- End SiteCatalyst code version: H.8. -->
    </div>

    <div id="adcHeader" class="hideOnPrint hideInXcode">
        <div id='ssi_Header' class="hideInXcode unified">
            <a id="ssi_LibraryTitle" href='../../../../navigation/'>Documentation Archive</a>
            <a id="ssi_AppleDeveloperConnection" href='https://developer.apple.com/'>Developer</a>
            <div id='ssi_SearchButton' role="button" title="Search">Search</div>
        </div>
        <form id='ssi_SearchMenu' method='get' action='../../../../search/' accept-charset='utf-8'>
            <label for='adcsearch'>Search Documentation Archive</label>
            
            
    
            <input type='search' id='ssi_SearchField' name='q' accesskey='s' results='5' />
        </form>
    </div>

    <header id="header">
        <div id="title" role="banner">
            <h1>JavaScript for Automation Release Notes</h1>
            <span id="file_links">
                <a id="PDF_link" role="button" tabindex='4' rel="alternate" title="Download PDF"><span id="pdf_icon"></span>PDF</a>
                <a id="Companion_link" role="button" tabindex='3' title="Download Companion File"><span id="companion_icon"></span>Companion File</a>
            </span>
        </div>
        <ul id="headerButtons" class="hideOnPrint" role="toolbar">
            <li id="toc_button" style="display:none">
                <button tabindex="5" id="table_of_contents" class="open" role="checkbox" aria-label="Show Table of Contents"><span class="disclosure"></span>Table of Contents</button>
            </li>
            <li id="jumpto_button" style="display:none" role="navigation"><select tabindex="6" id="jumpTo"><option value="top">Jump To&#133;</option></select></li>
            <li id="downloadSample_button" style="display:none">
                <a id="Sample_link"><button id="Sample_button">Download Sample Code</button></a>
            </li>
        </ul>
    </header>
    <nav id="tocContainer" tabindex="7">
        <ul id="toc" role="tree"></ul>
    </nav>

    <article id="contents" tabindex="0" role="main">
        <div id="pageNavigationLinks_top" class="pageNavigationLinks">
            <a class='nextLink' rel='next' href='RevisionHistory.html'>Next</a><a class='previousLink' rel='prev' href='OSX10-11.html'>Previous</a>
        </div>
        <a id="top" name="top"></a>
        <a id="INDEX" href="../index.html" style="display:none;"></a>
        
        <a name="//apple_ref/doc/uid/TP40014508-CH109-SW1" title="OS X 10.10 Release Notes"></a><h1 id="pageTitle">OS X 10.10 Release Notes</h1><p>This article describes JavaScript for Automation, a new feature in OS X Yosemite.</p><section><a name="//apple_ref/doc/uid/TP40014508-CH109-SW2" title="Global Properties"></a><h2 class="jump">Global Properties</h2><p>JavaScript for Automation is a host environment for JavaScript that adds the following global properties:</p><ul class="ul"><li class="li"><p><code>Automation</code></p></li><li class="li"><p><code>Application</code></p></li><li class="li"><p><code>Library</code></p></li><li class="li"><p><code>Path</code></p></li><li class="li"><p><code>Progress</code></p></li><li class="li"><p><code>ObjectSpecifier</code></p></li><li class="li"><p><code>delay</code></p></li><li class="li"><p><code>console.log</code></p></li><li class="li"><p><code>ObjC</code></p></li><li class="li"><p><code>Ref</code></p></li><li class="li"><p><code>$</code></p></li></ul><section><a name="//apple_ref/doc/uid/TP40014508-CH109-SW3" title="Open Scripting Architecture (OSA) Component"></a><h3 class="jump">Open Scripting Architecture (OSA) Component</h3><p>The JavaScript OSA component implements JavaScript for Automation. The component can be used from Script Editor, the system-wide Script menu, the Run JavaScript Automator action, applets, droplets, the <code>osascript</code> command-line tool, the <code><a href="https://developer.apple.com/documentation/foundation/nsuserscripttask" class="urlLink" target="_self">NSUserScriptTask</a></code> API, and everywhere else that other OSA components, such as AppleScript, can be used. This includes Mail rules, Folder Actions, Address Book plug-ins, Calendar alarms, and message triggers.</p><div class="notebox"><aside><a name="//apple_ref/doc/uid/TP40014508-CH109-SW55" title="Note"></a><p><strong>Note:</strong>&nbsp;The Open Scripting Architecture (OSA) provides a standard and extensible mechanism for interapplication communication in OS X. Communication takes place through the exchange of Apple events, a type of message designed to encapsulate commands and data of any complexity. For information about OSA, see <span class="content_text"><a href="../../../../documentation/AppleScript/Conceptual/AppleScriptX/Concepts/osa.html#//apple_ref/doc/uid/TP40001571" data-renderer-version="1" target="_self">Open Scripting Architecture</a></span> in <em><a href="../../../../documentation/AppleScript/Conceptual/AppleScriptLangGuide/introduction/ASLR_intro.html#//apple_ref/doc/uid/TP40000983" data-renderer-version="1" target="_self">AppleScript Language Guide</a></em>.</p><p></p></aside></div></section><section><a name="//apple_ref/doc/uid/TP40014508-CH109-SW4" title="Scripting Dictionaries"></a><h3 class="jump">Scripting Dictionaries</h3><p>Scripting dictionaries detail the object model of applications. Terminology in scripting dictionaries maps to valid JavaScript identifiers by following a set of conventions. The Script Dictionary viewer in Script Editor has been updated to show terminology in AppleScript, JavaScript, and Objective-C (Scripting Bridge framework) formats. To open a scripting dictionary, launch Script Editor (in <code>/Applications/Utilities/</code>) and choose File &gt; Open Dictionary or Window &gt; Library.</p></section><section><a name="//apple_ref/doc/uid/TP40014508-CH109-SW5" title="Object Specifiers"></a><h3 class="jump">Object Specifiers</h3><p>Many objects in the JavaScript for Automation host environment refer to external entities, such as other applications, or windows or data inside of those other applications. When you access a JavaScript property of an application object, or of an element of an application object, a new object specifier is returned that refers to the specific property of that object.</p><div class="notebox"><aside><a name="//apple_ref/doc/uid/TP40014508-CH109-SW56" title="Note"></a><p><strong>Note:</strong>&nbsp;An object specifier is not the actual value of the external entity's property; it is a reference to the object. To retrieve the value of a referenced property, an additional step is required, described in <span class="content_text"><a href="#//apple_ref/doc/uid/TP40014508-CH109-SW8" data-renderer-version="1">Getting and Setting Properties</a></span>.</p><p></p></aside></div></section></section><section><a name="//apple_ref/doc/uid/TP40014508-CH109-SW6" title="Accessing Applications"></a><h2 class="jump">Accessing Applications</h2><p>You can access an application in a number of ways:</p><ul class="ul"><li class="li"><p>By name</p><div class="codesample clear"><table><tr><td scope="row"><pre>Application('Mail')<span></span></pre></td></tr></table></div></li><li class="li"><p>By bundle ID</p><div class="codesample clear"><table><tr><td scope="row"><pre>Application('com.apple.mail')<span></span></pre></td></tr></table></div></li><li class="li"><p>By path</p><div class="codesample clear"><table><tr><td scope="row"><pre>Application('/Applications/Mail.app')<span></span></pre></td></tr></table></div></li><li class="li"><p>By process ID</p><div class="codesample clear"><table><tr><td scope="row"><pre>Application(763)<span></span></pre></td></tr></table></div></li><li class="li"><p>On a remote machine</p><div class="codesample clear"><table><tr><td scope="row"><pre>Application('eppc://127.0.0.1/Mail')<span></span></pre></td></tr></table></div></li><li class="li"><p>Accessing the application that is running the script</p><div class="codesample clear"><table><tr><td scope="row"><pre>Application.currentApplication()<span></span></pre></td></tr></table></div></li></ul></section><section><a name="//apple_ref/doc/uid/TP40014508-CH109-SW7" title="Syntax Examples"></a><h2 class="jump">Syntax Examples</h2><p>The following examples demonstrate the syntax for interacting with objects in an application:</p><ul class="ul"><li class="li"><p>Access properties</p><div class="codesample clear"><table><tr><td scope="row"><pre>Mail.name<span></span></pre></td></tr></table></div></li><li class="li"><p>Access elements</p><div class="codesample clear"><table><tr><td scope="row"><pre>Mail.outgoingMessages[0]<span></span></pre></td></tr></table></div></li><li class="li"><p>Call commands</p><div class="codesample clear"><table><tr><td scope="row"><pre>Mail.open(...)<span></span></pre></td></tr></table></div></li><li class="li"><p>Create new objects</p><div class="codesample clear"><table><tr><td scope="row"><pre>Mail.OutgoingMessage(...)<span></span></pre></td></tr></table></div></li></ul></section><section><a name="//apple_ref/doc/uid/TP40014508-CH109-SW8" title="Getting and Setting Properties"></a><h2 class="jump">Getting and Setting Properties</h2><p>You access properties of scripting objects as JavaScript properties using <em class="newTerm">dot notation</em>. As described above, the returned object is an object specifier—a reference to the accessed property—rather than the actual value. To send the <code>get</code> event to the external entity and return its value, call the property as a function:</p><div class="codesample clear"><table><tr><td scope="row"><pre>subject = Mail.inbox.messages[0].subject()<span></span></pre></td></tr></table></div><p>Similarly, setting a property sends the <code>set</code> event to the external entity with the data you want to set.</p><div class="codesample clear"><table><tr><td scope="row"><pre>Mail.outgoingMessages[0].subject = 'Hello world'<span></span></pre></td></tr></table></div><p>Here is an example showing how to get a property from every element of an array (in this case, the subject of every message in Mail's inbox).</p><div class="codesample clear"><table><tr><td scope="row"><pre>subjects = Mail.inbox.messages.subject()<span></span></pre></td></tr></table></div></section><section><a name="//apple_ref/doc/uid/TP40014508-CH109-SW9" title="Element Arrays"></a><h2 class="jump">Element Arrays</h2><p>You access elements within an array by calling specific element retrieval methods on the array, or by using square brackets and specifying the name or index of the element you want to retrieve. The returned values are object specifiers, with their own properties and elements, that refer to the array elements. They can be accessed by:</p><ul class="ul"><li class="li"><p>Index</p><div class="codesample clear"><table><tr><td scope="row"><pre>window = Mail.windows.at(0)<span></span></pre></td></tr><tr><td scope="row"><pre>window = Mail.windows[0]<span></span></pre></td></tr></table></div></li><li class="li"><p>Name</p><div class="codesample clear"><table><tr><td scope="row"><pre>window = Mail.windows.byName('New Message')<span></span></pre></td></tr><tr><td scope="row"><pre>window = Mail.windows['New Message']<span></span></pre></td></tr></table></div></li><li class="li"><p>ID</p><div class="codesample clear"><table><tr><td scope="row"><pre>window = Mail.windows.byId(412)<span></span></pre></td></tr></table></div></li></ul><div class="notebox"><aside><a name="//apple_ref/doc/uid/TP40014508-CH109-SW37" title="Note"></a><p><strong>Note:</strong>&nbsp;ID access does not have a square bracket shorthand.</p><p></p></aside></div></section><section><a name="//apple_ref/doc/uid/TP40014508-CH109-SW10" title="Filtering Arrays"></a><h2 class="jump">Filtering Arrays</h2><p>To filter arrays, returning only some of the elements, use the <code>whose</code> method. Here is the general syntax.</p><div class="codesample clear"><table><tr><td scope="row"><pre>someElementArray.whose({...})<span></span></pre></td></tr></table></div><p>Pass in an object containing the query's criteria—element property and value to use for filtering. You can use this technique to check for:</p><ul class="ul"><li class="li"><p>Literal property matches</p><div class="codesample clear"><table><tr><td scope="row"><pre>{ name: 'JavaScript for Automation' }<span></span></pre></td></tr><tr><td scope="row"><pre>{ name: { _equals: 'JavaScript for Automation' } }<span></span></pre></td></tr><tr><td scope="row"><pre>{ name: { '=': 'JavaScript for Automation' } }<span></span></pre></td></tr></table></div></li><li class="li"><p>Property matches containing a value</p><div class="codesample clear"><table><tr><td scope="row"><pre>{ name: { _contains: 'script for Auto' } }<span></span></pre></td></tr></table></div></li><li class="li"><p>Property matches beginning with a value</p><div class="codesample clear"><table><tr><td scope="row"><pre>{ name: { _beginsWith: 'JavaScript' } }<span></span></pre></td></tr></table></div></li><li class="li"><p>Property matches ending with a value</p><div class="codesample clear"><table><tr><td scope="row"><pre>{ name: { _endsWith: 'Automation' } }<span></span></pre></td></tr></table></div></li><li class="li"><p>Property matches greater than a value</p><div class="codesample clear"><table><tr><td scope="row"><pre>{ size: { _greaterThan: 20 } }<span></span></pre></td></tr><tr><td scope="row"><pre>{ size: { '&gt;': 20 } }<span></span></pre></td></tr></table></div></li><li class="li"><p>Property matches greater than or equal to a value</p><div class="codesample clear"><table><tr><td scope="row"><pre>{ size: { _greaterThanEquals: 20 } }<span></span></pre></td></tr><tr><td scope="row"><pre>{ size: { '&gt;=': 20 } }<span></span></pre></td></tr></table></div></li><li class="li"><p>Property matches less than a value</p><div class="codesample clear"><table><tr><td scope="row"><pre>{ size: { _lessThan: 20 } }<span></span></pre></td></tr><tr><td scope="row"><pre>{ size: { '&lt;': 20 } }<span></span></pre></td></tr></table></div></li><li class="li"><p>Property matches less than or equal to a value</p><div class="codesample clear"><table><tr><td scope="row"><pre>{ size: { _lessThanEquals: 20 } }<span></span></pre></td></tr><tr><td scope="row"><pre>{ size: { '&lt;=': 20 } }<span></span></pre></td></tr></table></div></li><li class="li"><p>Subelement property matches</p><div class="codesample clear"><table><tr><td scope="row"><pre>{ _match: [ ObjectSpecifier.tabs[0].name, 'Apple' ] }<span></span></pre></td></tr></table></div></li></ul><div class="notebox"><aside><a name="//apple_ref/doc/uid/TP40014508-CH109-SW38" title="Note"></a><p><strong>Note:</strong>&nbsp;The <code>_match</code> key takes an array as its value.</p><p></p></aside></div><p>You can also combine queries in order to determine whether multiple criteria evaluate to <code>true</code>.</p><ul class="ul"><li class="li"><p>All criteria evaluate to <code>true</code>.</p><div class="codesample clear"><table><tr><td scope="row"><pre>{ _and: [<span></span></pre></td></tr><tr><td scope="row"><pre>    { name: 'Apple' },<span></span></pre></td></tr><tr><td scope="row"><pre>    { size: { '&lt;': 20 } },<span></span></pre></td></tr><tr><td scope="row"><pre>]}<span></span></pre></td></tr></table></div><div class="notebox"><aside><a name="//apple_ref/doc/uid/TP40014508-CH109-SW39" title="Note"></a><p><strong>Note:</strong>&nbsp;An object with multiple criteria to match is treated as a logical <code>and</code> operator (<code>&amp;&amp;</code>).</p><p>The <code>_and</code> array requires at least two elements.</p><p></p></aside></div></li><li class="li"><p>At least one of the criteria evaluates to <code>true</code>.</p><div class="codesample clear"><table><tr><td scope="row"><pre>{ _or: [<span></span></pre></td></tr><tr><td scope="row"><pre>    { name: 'Apple' },<span></span></pre></td></tr><tr><td scope="row"><pre>    { name: { _contains: 'JavaScript' } },<span></span></pre></td></tr><tr><td scope="row"><pre>]}<span></span></pre></td></tr></table></div><div class="notebox"><aside><a name="//apple_ref/doc/uid/TP40014508-CH109-SW40" title="Note"></a><p><strong>Note:</strong>&nbsp;The <code>_or</code> array requires at least two elements.</p><p></p></aside></div></li><li class="li"><p>None of the criteria evaluates to <code>true</code>.</p><div class="codesample clear"><table><tr><td scope="row"><pre>{ _not: [<span></span></pre></td></tr><tr><td scope="row"><pre>    { name: 'Apple' },<span></span></pre></td></tr><tr><td scope="row"><pre>    { name: { _contains: 'JavaScript' } },<span></span></pre></td></tr><tr><td scope="row"><pre>]}<span></span></pre></td></tr></table></div><div class="notebox"><aside><a name="//apple_ref/doc/uid/TP40014508-CH109-SW41" title="Note"></a><p><strong>Note:</strong>&nbsp;The <code>_not</code> array can have one or more elements.</p><p></p></aside></div></li></ul><p>The <code>_and</code>, <code>_or</code>, and <code>_not</code> keys require arrays as their value.</p><p>Here is an example of a <code>whose</code> clause to find all of the messages in your inbox that contain the word <em>JavaScript</em> or the word <em>Automation</em> in the subject.</p><div class="codesample clear"><table><tr><td scope="row"><pre>Mail = Application('Mail')<span></span></pre></td></tr><tr><td scope="row"><pre>Mail.inbox.messages.whose({<span></span></pre></td></tr><tr><td scope="row"><pre>    _or: [<span></span></pre></td></tr><tr><td scope="row"><pre>        { subject: { _contains: "JavaScript" } },<span></span></pre></td></tr><tr><td scope="row"><pre>        { subject: { _contains: "Automation" } }<span></span></pre></td></tr><tr><td scope="row"><pre>    ]<span></span></pre></td></tr><tr><td scope="row"><pre>})<span></span></pre></td></tr></table></div></section><section><a name="//apple_ref/doc/uid/TP40014508-CH109-SW11" title="Calling Commands"></a><h2 class="jump">Calling Commands</h2><p>Commands are called as functions. Some commands take a direct parameter, which is passed as the first argument to a command. Some commands can take named parameters, accepting an object of keyed values for the named parameters. If the command takes a direct parameter, you pass the object of named parameters as a second argument. If the command has no direct parameter, the object of named parameters is passed as the first and only argument. When the direct parameter is optional, you can pass nothing to the command, or you can pass null as the first parameter if you will pass in named parameters.</p><ul class="ul"><li class="li"><p>Command with no arguments</p><div class="codesample clear"><table><tr><td scope="row"><pre>message.open()<span></span></pre></td></tr></table></div></li><li class="li"><p>Command with direct parameter</p><div class="codesample clear"><table><tr><td scope="row"><pre>Mail.open(message)<span></span></pre></td></tr></table></div></li><li class="li"><p>Command with named parameters</p><div class="codesample clear"><table><tr><td scope="row"><pre>response = message.reply({<span></span></pre></td></tr><tr><td scope="row"><pre>    replayAll: true,<span></span></pre></td></tr><tr><td scope="row"><pre>    openingWindow: false<span></span></pre></td></tr><tr><td scope="row"><pre>})<span></span></pre></td></tr></table></div></li><li class="li"><p>Command with direct parameter and named parameters</p><div class="codesample clear"><table><tr><td scope="row"><pre>Safari.doJavaScript('alert("Hello world")', {<span></span></pre></td></tr><tr><td scope="row"><pre>    in: Safari.windows[0].tabs[0]<span></span></pre></td></tr><tr><td scope="row"><pre>})<span></span></pre></td></tr></table></div></li></ul></section><section><a name="//apple_ref/doc/uid/TP40014508-CH109-SW12" title="Creating Objects"></a><h2 class="jump">Creating Objects</h2><p>You can create new objects by calling class constructors as functions and optionally providing properties and data. When making an object, you must either call the <code>make</code> method on the object, or call the <code>push</code> method on an application object array for the object to actually be created. Until you call one of these methods, the object doesn't actually exist in the application.</p><ul class="ul"><li class="li"><p>Create a new object.</p><div class="codesample clear"><table><tr><td scope="row"><pre>message = Mail.OutgoingMessage().make()<span></span></pre></td></tr></table></div></li><li class="li"><p>Create a new object with properties.</p><div class="codesample clear"><table><tr><td scope="row"><pre>message = Mail.OutgoingMessage({<span></span></pre></td></tr><tr><td scope="row"><pre>    subject: 'Hello world',<span></span></pre></td></tr><tr><td scope="row"><pre>    visible: true<span></span></pre></td></tr><tr><td scope="row"><pre>})<span></span></pre></td></tr><tr><td scope="row"><pre>Mail.outgoingMessages.push(message)<span></span></pre></td></tr></table></div></li><li class="li"><p>Create a new object with data.</p><div class="codesample clear"><table><tr><td scope="row"><pre>para = TextEdit.Paragraph({}, 'Some text')<span></span></pre></td></tr><tr><td scope="row"><pre>TextEdit.documents[0].paragraphs.push(para)<span></span></pre></td></tr></table></div></li></ul><p>Once you create a new object in an application (by calling <code>make</code> or <code>push</code>), you can interact with it like any existing application objects.</p><div class="codesample clear"><table><tr><td scope="row"><pre>message = Mail.OutgoingMessage().make()<span></span></pre></td></tr><tr><td scope="row"><pre>message.subject = 'Hello world'<span></span></pre></td></tr></table></div><div class="notebox"><aside><a name="//apple_ref/doc/uid/TP40014508-CH109-SW42" title="Note"></a><p><strong>Note:</strong>&nbsp;Class constructors are title cased.</p><p></p></aside></div></section><section><a name="//apple_ref/doc/uid/TP40014508-CH109-SW13" title="Scripting Additions"></a><h2 class="jump">Scripting Additions</h2><p>Use scripting additions (plug-ins for scripts) to enhance the functionality of applications. The OS has a set of standard scripting additions that provide the ability to speak text, display user interaction dialogs, and more. To use them, an application must explicitly set the <code>includeStandardAdditions</code> flag to <code>true</code>.</p><div class="codesample clear"><table><tr><td scope="row"><pre>app = Application.currentApplication()<span></span></pre></td></tr><tr><td scope="row"><pre>app.includeStandardAdditions = true<span></span></pre></td></tr><tr><td scope="row"><pre>app.say('Hello world')<span></span></pre></td></tr><tr><td scope="row"><pre>app.displayDialog('Please enter your email address', {<span></span></pre></td></tr><tr><td scope="row"><pre>    withTitle: 'Email',<span></span></pre></td></tr><tr><td scope="row"><pre>    defaultAnswer: 'your_email@site.com'<span></span></pre></td></tr><tr><td scope="row"><pre>})<span></span></pre></td></tr></table></div></section><section><a name="//apple_ref/doc/uid/TP40014508-CH109-SW34" title="Strict Flags"></a><h2 class="jump">Strict Flags</h2><p>You can affect how strictly JavaScript for Automation treats application objects when you:</p><ul class="ul"><li class="li"><p>Look up properties of objects.</p><div class="codesample clear"><table><tr><td scope="row"><pre>app.strictPropertyScope = true<span></span></pre></td></tr></table></div><p>If the <code>Foo</code> class has a property <code>bar</code>, but the <code>Baz</code> class does not, the following code will only send the proper event to get the property when <code>strictPropertyScope</code> is <code>false</code>.</p><div class="codesample clear"><table><tr><td scope="row"><pre>app.baz[0].bar()<span></span></pre></td></tr></table></div></li><li class="li"><p>Look up commands that objects respond to.</p><div class="codesample clear"><table><tr><td scope="row"><pre>app.strictCommandScope = true<span></span></pre></td></tr></table></div><p>If the application has a command <code>foo</code>, but the <code>Bar</code> class does not say it responds to that command, the following code will only send the proper command event when <code>strictCommandScope</code> is <code>false</code>.</p><div class="codesample clear"><table><tr><td scope="row"><pre>app.bar[0].foo()<span></span></pre></td></tr></table></div></li><li class="li"><p>Check the types of parameters sent in commands.</p><div class="codesample clear"><table><tr><td scope="row"><pre>app.strictParameterType = true<span></span></pre></td></tr></table></div><p>For example, System Events has a <code>keystroke</code> command that accepts text as its first argument. The application's <code>strictParameterType</code> property must be <code>false</code> for you to be able to send a number instead of a string.</p></li></ul><p>By default, applications have <code>strictPropertyScope</code> and <code>strictCommandScope</code> set to <code>false</code> and <code>strictParameterType</code> set to <code>true</code>.</p></section><section><a name="//apple_ref/doc/uid/TP40014508-CH109-SW36" title="Passing Event Modifiers"></a><h2 class="jump">Passing Event Modifiers</h2><p>You can pass event modifiers when getting and setting properties, calling commands on objects, creating new objects in applications, and so on. The event modifiers should be passed as the last argument to whatever function you are calling. Here are some examples:</p><ul class="ul"><li class="li"><p>Call a command with a timeout—the amount of time a script allows for a single event to execute.</p><div class="codesample clear"><table><tr><td scope="row"><pre>TextEdit = Application('TextEdit')<span></span></pre></td></tr><tr><td scope="row"><pre>doc = TextEdit.documents[0]<span></span></pre></td></tr><tr><td scope="row"><pre>doc.close({ saving: 'ask' }, { timeout: 20 })<span></span></pre></td></tr></table></div></li><li class="li"><p>Call a <code>whose</code> method while ignoring case, but considering white space and hyphens.</p><div class="codesample clear"><table><tr><td scope="row"><pre>app.documents.whose({<span></span></pre></td></tr><tr><td scope="row"><pre>    text: { _contains: 'custom-built automation' }<span></span></pre></td></tr><tr><td scope="row"><pre>}, {<span></span></pre></td></tr><tr><td scope="row"><pre>    ignoring: 'case',<span></span></pre></td></tr><tr><td scope="row"><pre>    considering: ['white space', 'hyphens']<span></span></pre></td></tr><tr><td scope="row"><pre>})<span></span></pre></td></tr></table></div></li></ul><p>You can consider or ignore:</p><ul class="ul"><li class="li"><p>Case</p></li><li class="li"><p>Diacriticals</p></li><li class="li"><p>White space</p></li><li class="li"><p>Hyphens</p></li><li class="li"><p>Punctuation</p></li><li class="li"><p>Numeric strings</p></li><li class="li"><p>Application responses</p></li></ul><div class="notebox"><aside><a name="//apple_ref/doc/uid/TP40014508-CH109-SW57" title="Note"></a><p><strong>Note:</strong>&nbsp;If a function has named parameters, as seen in the <code>close</code> function in the timeout example above, the event modifiers must follow a named parameters object. If the function’s named parameters are optional, the named parameters object is still required, even if it’s empty.</p><p></p></aside></div></section><section><a name="//apple_ref/doc/uid/TP40014508-CH109-SW33" title="ObjectSpecifier"></a><h2 class="jump">ObjectSpecifier</h2><p>You can use the <code>ObjectSpecifier</code> object  to:</p><ul class="ul"><li class="li"><p>Check whether an object is an object specifier</p><div class="codesample clear"><table><tr><td scope="row"><pre>Mail.inbox.messages[0] instanceof ObjectSpecifier == true<span></span></pre></td></tr></table></div></li><li class="li"><p>Get the class of an object specifier</p><div class="codesample clear"><table><tr><td scope="row"><pre>Mail = Application('Mail')<span></span></pre></td></tr><tr><td scope="row"><pre>ObjectSpecifier.classOf(Mail.inbox)<span></span></pre></td></tr></table></div></li><li class="li"><p>Build arbitrary object specifier chains for use in whose clauses</p><div class="codesample clear"><table><tr><td scope="row"><pre>firstTabsName = ObjectSpecifier.tabs[0].name<span></span></pre></td></tr><tr><td scope="row"><pre>app.windows.whose({<span></span></pre></td></tr><tr><td scope="row"><pre>    _match: [firstTabsName, 'Apple']<span></span></pre></td></tr><tr><td scope="row"><pre>})<span></span></pre></td></tr></table></div></li></ul></section><section><a name="//apple_ref/doc/uid/TP40014508-CH109-SW31" title="Paths"></a><h2 class="jump">Paths</h2><p>When you need to interact with files, such as a document in TextEdit, you will need a <code>path</code> object, not just a string with a path in it. You can use the <code>Path</code> constructor to instantiate paths.</p><div class="codesample clear"><table><tr><td scope="row"><pre>TextEdit = Application('TextEdit')<span></span></pre></td></tr><tr><td scope="row"><pre>path = Path('/Users/username/Desktop/foo.rtf')<span></span></pre></td></tr><tr><td scope="row"><pre>TextEdit.open(path)<span></span></pre></td></tr></table></div><div class="notebox"><aside><a name="//apple_ref/doc/uid/TP40014508-CH109-SW43" title="Note"></a><p><strong>Note:</strong>&nbsp;Get the string value of the <code>Path</code> by calling the <code>toString</code> method.</p><p></p></aside></div></section><section><a name="//apple_ref/doc/uid/TP40014508-CH109-SW35" title="Progress"></a><h2 class="jump">Progress</h2><p>You can interact with a script's <code>Progress</code> object to affect the UI that details the script's progress. You can set the object’s:</p><ul class="ul"><li class="li"><p>Total unit count</p><div class="codesample clear"><table><tr><td scope="row"><pre>Progress.totalUnitCount = 10<span></span></pre></td></tr></table></div></li><li class="li"><p>Completed unit count</p><div class="codesample clear"><table><tr><td scope="row"><pre>Progress.completedUnitCount = 1<span></span></pre></td></tr></table></div></li><li class="li"><p>Description</p><div class="codesample clear"><table><tr><td scope="row"><pre>Progress.description = 'Processing Files'<span></span></pre></td></tr></table></div><div class="notebox"><aside><a name="//apple_ref/doc/uid/TP40014508-CH109-SW44" title="Note"></a><p><strong>Note:</strong>&nbsp;Setting the description of the progress object will replace the "Running..." text that appears by default.</p><p></p></aside></div></li><li class="li"><p>Additional description</p><div class="codesample clear"><table><tr><td scope="row"><pre>Progress.additionalDescription = 'This may take a little while'<span></span></pre></td></tr></table></div><div class="notebox"><aside><a name="//apple_ref/doc/uid/TP40014508-CH109-SW45" title="Note"></a><p><strong>Note:</strong>&nbsp;Setting the additional description of the progress object means the total unit count and completed unit count will not be shown.</p><p></p></aside></div></li></ul></section><section><a name="//apple_ref/doc/uid/TP40014508-CH109-SW14" title="Libraries"></a><h2 class="jump">Libraries</h2><p>To use scripts as libraries, store them in <code>~/Library/Script Libraries/</code>.</p><p>Suppose you have a script library named <code>toolbox.scpt</code>, which contains the following code:</p><div class="codesample clear"><table><tr><td scope="row"><pre>function log(message) {<span></span></pre></td></tr><tr><td scope="row"><pre>    TextEdit = Application('TextEdit')<span></span></pre></td></tr><tr><td scope="row"><pre>    doc = TextEdit.documents['Log.rtf']<span></span></pre></td></tr><tr><td scope="row"><pre>    doc.text = message<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div><p>Another script can target methods in your library using the following syntax.</p><div class="codesample clear"><table><tr><td scope="row"><pre>toolbox = Library('toolbox')<span></span></pre></td></tr><tr><td scope="row"><pre>toolbox.log('Hello world')<span></span></pre></td></tr></table></div><div class="notebox"><aside><a name="//apple_ref/doc/uid/TP40014508-CH109-SW46" title="Note"></a><p><strong>Note:</strong>&nbsp;Any code outside of functions in a library will be executed when the library is instantiated.</p><p></p></aside></div></section><section><a name="//apple_ref/doc/uid/TP40014508-CH109-SW15" title="Applets"></a><h2 class="jump">Applets</h2><p>You can make standalone, double-clickable applications (called applets) by writing a script in Script Editor and saving it as an application. Applets support the following event handlers:</p><ul class="ul"><li class="li"><p>A <code>run</code> event handler is called when the applet runs.</p><div class="codesample clear"><table><tr><td scope="row"><pre>function run() {...}<span></span></pre></td></tr></table></div><div class="notebox"><aside><a name="//apple_ref/doc/uid/TP40014508-CH109-SW47" title="Note"></a><p><strong>Note:</strong>&nbsp;Unless explicitly defined, this handler is implied in a script and any code outside of a function is executed when the applet runs.</p><p></p></aside></div></li><li class="li"><p>An <code>openDocuments</code> event handler’s inclusion configures the applet to operate as a droplet. This handler is called when documents are dropped onto the applet.</p><div class="codesample clear"><table><tr><td scope="row"><pre>function openDocuments(docs) {...}<span></span></pre></td></tr></table></div><div class="notebox"><aside><a name="//apple_ref/doc/uid/TP40014508-CH109-SW58" title="Note"></a><p><strong>Note:</strong>&nbsp;The argument passed to the <code>openDocuments</code> handler is an array of file path strings.</p><p></p></aside></div></li><li class="li"><p>A <code>printDocuments</code> handler is called when the applet is told to print documents.</p><div class="codesample clear"><table><tr><td scope="row"><pre>function printDocuments(docs) {...}<span></span></pre></td></tr></table></div><div class="notebox"><aside><a name="//apple_ref/doc/uid/TP40014508-CH109-SW48" title="Note"></a><p><strong>Note:</strong>&nbsp;The argument passed to the <code>printDocuments</code> handler is an array of file path strings.</p><p></p></aside></div></li><li class="li"><p>An <code>idle</code> handler is called periodically when the script enters an idle period. This handler allows you to do periodic processing.</p><div class="codesample clear"><table><tr><td scope="row"><pre>function idle() {...}<span></span></pre></td></tr></table></div></li><li class="li"><p>A <code>reopen</code> handler is called when the applet is reopened.</p><div class="codesample clear"><table><tr><td scope="row"><pre>function reopen() {...}<span></span></pre></td></tr></table></div></li><li class="li"><p>A <code>quit</code> handler is called when the applet is quit.</p><div class="codesample clear"><table><tr><td scope="row"><pre>function quit() {...}<span></span></pre></td></tr></table></div><div class="notebox"><aside><a name="//apple_ref/doc/uid/TP40014508-CH109-SW49" title="Note"></a><p><strong>Note:</strong>&nbsp;Returning <code>false</code> from the quit handler is the only way to prevent an applet from quitting. Having no quit handler or returning any value other than <code>false</code> (including not returning a value) causes the applet to quit as it normally would.</p><p></p></aside></div></li></ul></section><section><a name="//apple_ref/doc/uid/TP40014508-CH109-SW16" title="UI Automation"></a><h2 class="jump">UI Automation</h2><p>You can automate the user interfaces of applications by scripting the System Events application. Explore the scripting dictionary of System Events in Script Editor—specifically the Processes Suite—to see a list of application interface elements that support this type of automation.</p><p>The following example uses UI scripting to create a new note in Notes.</p><div class="codesample clear"><table><tr><td scope="row"><pre>Notes = Application('Notes')<span></span></pre></td></tr><tr><td scope="row"><pre>Notes.activate()<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>delay(1)<span></span></pre></td></tr><tr><td scope="row"><pre>SystemEvents = Application('System Events')<span></span></pre></td></tr><tr><td scope="row"><pre>Notes = SystemEvents.processes['Notes']<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>Notes.windows[0].splitterGroups[0].groups[1].groups[0].buttons[0].click()<span></span></pre></td></tr></table></div></section><section><a name="//apple_ref/doc/uid/TP40014508-CH109-SW17" title="Objective-C Bridge"></a><h2 class="jump">Objective-C Bridge</h2><p>JavaScript for Automation has a built-in Objective-C bridge that enables you to access the file system and build Cocoa applications.</p><p>The primary access points for the Objective-C bridge are the global properties <code>ObjC</code> and <code>$</code>.</p><section><a name="//apple_ref/doc/uid/TP40014508-CH109-SW18" title="Frameworks"></a><h3 class="jump">Frameworks</h3><p>The symbols from the Foundation framework are available by default in JavaScript for Automation. You can make additional frameworks and libraries available using the <code>ObjC.import()</code> method. For example, to use the <code>NSBeep()</code> function, which is not present in Foundation, you can import the Cocoa framework.</p><div class="codesample clear"><table><tr><td scope="row"><pre>ObjC.import('Cocoa')<span></span></pre></td></tr><tr><td scope="row"><pre>$.NSBeep()<span></span></pre></td></tr></table></div><p>In addition to system frameworks, functionality from some of the system libraries has been exposed. This functionality can be imported by referring to the name of the header file (without the <code>.h</code>) that declares that functionality, such as <code>arpa/inet</code>, <code>asl</code>, <code>copyfile</code>, <code>dispatch</code>, <code>dyld</code>, <code>errno</code>, <code>getopt</code>, <code>glob</code>, <code>grp</code>, <code>ifaddrs</code>, <code>launch</code>, <code>membership</code>, <code>netdb</code>, <code>netinet/in</code>, <code>notify</code>, <code>objc</code>, <code>paths</code>, <code>pwd</code>, <code>readline</code>, <code>removefile</code>, <code>signal</code>, <code>spawn</code>, <code>sqlite3</code>, <code>stdio</code>, <code>stdlib</code>, <code>string</code>, <code>sys/fcntl</code>, <code>sys/file</code>, <code>sys/ioctl</code>, <code>sys/mount</code>, <code>sys/param</code>, <code>sys/resource</code>, <code>sys/socket</code>, <code>sys/stat</code>, <code>sys/sysctl</code>, <code>sys/time</code>, <code>sys/times</code>, <code>sys/types</code>, <code>sys/wait</code>, <code>sys/xattr</code>, <code>syslog</code>, <code>time</code>, <code>unistd</code>, <code>uuid/uuid</code>, <code>vImage</code>, <code>vecLib</code>, <code>vmnet</code>, <code>xpc</code>, and <code>zlib</code>.</p><p>When you import frameworks, the system consults bridge support files. In addition to built-in frameworks and libraries, you can import any framework that has bridge support by passing the full path to the framework, as in the following example:</p><div class="codesample clear"><table><tr><td scope="row"><pre>ObjC.import('/Library/Frameworks/Awesome.framework')<span></span></pre></td></tr></table></div></section><section><a name="//apple_ref/doc/uid/TP40014508-CH109-SW19" title="Data Types"></a><h3 class="jump">Data Types</h3><p>The primitive JavaScript data types are mapped to C data types. For example, a JavaScript string maps to <code>char *</code>, while a JavaScript integer maps to <code>int</code>. When using an ObjC API that returns a <code>char *</code>, you'll get a JS string.</p><div class="notebox"><aside><a name="//apple_ref/doc/uid/TP40014508-CH109-SW50" title="Note"></a><p><strong>Note:</strong>&nbsp;Longs will be converted to strings in JavaScript.</p><p></p></aside></div><p>Primitive JavaScript data types will be automatically converted to ObjC object types when passed as an argument to an ObjC method that is expecting an object type. For example, a JS string will be converted to an <code>NSString</code> object if that is what the method signature says the argument should be typed as.</p><p>Note, however, that ObjC object types that are returned by ObjC methods are never automatically converted to primitive JavaScript data types.</p></section><section><a name="//apple_ref/doc/uid/TP40014508-CH109-SW20" title="Instantiating Classes and Invoking Methods"></a><h3 class="jump">Instantiating Classes and Invoking Methods</h3><p>All classes are defined as properties of the <code>$</code> object. Methods of ObjC objects are invoked in one of two ways, depending on whether the method takes arguments.</p><p>If the ObjC method does not take arguments, then you invoke it by accessing the JavaScript property with that name. This example instantiates an empty mutable string.</p><div class="codesample clear"><table><tr><td scope="row"><pre>str = $.NSMutableString.alloc.init<span></span></pre></td></tr></table></div><p>If the ObjC method does take arguments, then you invoke it by calling the JavaScript method (function-typed property) named according to the JSExport convention; the letter following each ":" is capitalized, and then the ":"s are removed. This example instantiates an <code>NSString</code> from a JavaScript string and writes it to a file.</p><div class="codesample clear"><table><tr><td scope="row"><pre>str = $.NSString.alloc.initWithUTF8String('foo')<span></span></pre></td></tr><tr><td scope="row"><pre>str.writeToFileAtomically('/tmp/foo', true)<span></span></pre></td></tr></table></div><p>If you call a method, such as <code>-intValue</code>, that returns a C data type rather than an object, then you'll get back a primitive JavaScript data type. This example returns the primitive JavaScript integer, <code>99</code>.</p><div class="codesample clear"><table><tr><td scope="row"><pre>$.NSNumber.numberWithInt(99).intValue<span></span></pre></td></tr></table></div></section><section><a name="//apple_ref/doc/uid/TP40014508-CH109-SW21" title="Accessing ObjC Properties"></a><h3 class="jump">Accessing ObjC Properties</h3><p>ObjC properties are also accessed through JavaScript properties, similar to how you invoke methods that don’t have arguments.</p><p>When a property of a bridged object is accessed, the list of ObjC properties is first consulted, and if a property with that name exists, then the appropriate getter or setter selector for that property is used. If an ObjC property with that name does not exist on the class, then the property name is used as the method selector.</p><p>To define a property using a custom getter name, you can use either the property name or the getter name, and get the same result.</p><div class="codesample clear"><table><tr><td scope="row"><pre>task = $.NSTask.alloc.init<span></span></pre></td></tr><tr><td scope="row"><pre>task.running == task.isRunning<span></span></pre></td></tr></table></div><p>Also, unlike argument-less methods, bridged object properties that map to ObjC properties can also be set to (assuming the property is read/write). The following two lines are equivalent because <code>launchPath</code> is defined as an ObjC property.</p><div class="codesample clear"><table><tr><td scope="row"><pre>task.launchPath = '/bin/sleep'<span></span></pre></td></tr><tr><td scope="row"><pre>task.setLaunchPath('/bin/sleep')<span></span></pre></td></tr></table></div></section><section><a name="//apple_ref/doc/uid/TP40014508-CH109-SW22" title="Wrapping and Unwrapping"></a><h3 class="jump">Wrapping and Unwrapping</h3><p>The <code>ObjC.wrap()</code> method can be used convert a primitive JavaScript data type into an ObjC object type, and then wrap that ObjC object in a JavaScript wrapper.</p><p>The <code>ObjC.unwrap()</code> method can be used to convert a wrapped ObjC object into a primitive JavaScript data type.</p><p>The <code>ObjC.deepUnwrap()</code> method can be used to recursively convert a wrapped ObjC object into a primitive JavaScript data type.</p><p>The <code>$()</code> operator is a convenient alias for <code>ObjC.wrap()</code>, and is meant to be similar to the <code>@()</code> boxing operator in ObjC. For example, <code>$("foo")</code> returns a wrapped <code>NSString</code> instance, and <code>$(1)</code> returns a wrapped <code>NSNumber</code> instance.</p><p>The <code>.js</code> property of wrapped ObjC objects is a convenient alias for <code>ObjC.unwrap()</code>. For example, <code>$("foo").js</code> returns "foo".</p></section><section><a name="//apple_ref/doc/uid/TP40014508-CH109-SW23" title="Constants and Enumerations"></a><h3 class="jump">Constants and Enumerations</h3><p>Constants and enums are defined as properties of the <code>$</code> object.</p><div class="codesample clear"><table><tr><td scope="row"><pre>$.NSNotFound<span></span></pre></td></tr><tr><td scope="row"><pre>$.NSFileReadNoSuchFileError<span></span></pre></td></tr><tr><td scope="row"><pre>$.NSZeroRect<span></span></pre></td></tr></table></div></section><section><a name="//apple_ref/doc/uid/TP40014508-CH109-SW24" title="Functions"></a><h3 class="jump">Functions</h3><p>Functions are also defined as properties of the <code>$</code> object.</p><div class="codesample clear"><table><tr><td scope="row"><pre>$.NSBeep()<span></span></pre></td></tr><tr><td scope="row"><pre>$.NSMakeSize(33, 55)<span></span></pre></td></tr></table></div></section><section><a name="//apple_ref/doc/uid/TP40014508-CH109-SW51" title="Variadics"></a><h3 class="jump">Variadics</h3><p>When you use functions and methods that accept variadic arguments, every variable argument passed in must be the same type as the last declared parameter. For example, <code>printf</code> must receive <code>%s</code> arguments after the initial format string.</p><div class="codesample clear"><table><tr><td scope="row"><pre>ObjC.import('stdio')<span></span></pre></td></tr><tr><td scope="row"><pre>$.printf('%s %s %s', 'JavaScript', 'for', 'Automation')<span></span></pre></td></tr></table></div><p><code>NSLog</code> has a final declared parameter type of <code>%@</code> and must receive <code>%@</code> arguments after the initial format string.</p><div class="codesample clear"><table><tr><td scope="row"><pre>$.NSLog('%@ %@ %@', $('JavaScript'), $('for'), $('Automation'))<span></span></pre></td></tr></table></div><p>When you create an <code>NSArray</code> using <code>arrayWithObjects</code>, nil termination is handled for you. Don’t try to terminate it yourself.</p><div class="codesample clear"><table><tr><td scope="row"><pre>$.NSArray.arrayWithObjects($('JavaScript'), $('for'), $('Automation'))<span></span></pre></td></tr></table></div></section><section><a name="//apple_ref/doc/uid/TP40014508-CH109-SW25" title="Structs"></a><h3 class="jump">Structs</h3><p>Structs are represented as generic JavaScript objects, where the struct field names are the property names.</p><div class="codesample clear"><table><tr><td scope="row"><pre>$.NSMakeRect(0, 0, 1024, 768)<span></span></pre></td></tr></table></div><p>Result: {"origin":{"x":0,"y":0},"size":{"width":1024,"height":768}}</p></section><section><a name="//apple_ref/doc/uid/TP40014508-CH109-SW26" title="Nil"></a><h3 class="jump">Nil</h3><p>In ObjC, <code>nil</code> is a valid message target. Sending a message to a <code>nil</code> object returns <code>nil</code> again. This behavior is different in JavaScript, which does not allow methods to be called on <code>undefined</code>.</p><p>To create a JavaScript object that represents <code>nil</code>, call the <code>$()</code> function with no arguments.</p><div class="codesample clear"><table><tr><td scope="row"><pre>nil = $()<span></span></pre></td></tr></table></div><p>To determine if a bridged object is actually wrapping a <code>nil</code> pointer, you can call the <code>isNil()</code> method.</p><div class="codesample clear"><table><tr><td scope="row"><pre>if (o.isNil()) { ... }<span></span></pre></td></tr></table></div></section><section><a name="//apple_ref/doc/uid/TP40014508-CH109-SW27" title="Implicit Pass-by-Reference"></a><h3 class="jump">Implicit Pass-by-Reference</h3><p>This boxed <code>nil</code> can be passed as an argument to an ObjC method that expects an argument passed by reference; the runtime will automatically replace the inner <code>nil</code> pointer with the pointer returned by reference.</p><div class="codesample clear"><table><tr><td scope="row"><pre>error = $()<span></span></pre></td></tr><tr><td scope="row"><pre>fm = $.NSFileManager.defaultManager<span></span></pre></td></tr><tr><td scope="row"><pre>fm.attributesOfItemAtPathError('/DOES_NOT_EXIST', error)<span></span></pre></td></tr><tr><td scope="row"><pre>if (error.code == $.NSFileReadNoSuchFileError) {<span></span></pre></td></tr><tr><td scope="row"><pre>    // ...<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr></table></div></section><section><a name="//apple_ref/doc/uid/TP40014508-CH109-SW28" title="Explicit Pass-by-Reference"></a><h3 class="jump">Explicit Pass-by-Reference</h3><p>The <code>Ref</code> class can be used to pass arguments that ObjC expects to be passed by reference. The referenced value can be retrieved by accessing the <code>0</code> property of the <code>Ref</code>.</p><div class="codesample clear"><table><tr><td scope="row"><pre>function testExplicitPassByReference(path) {<span></span></pre></td></tr><tr><td scope="row"><pre>    ref = Ref()<span></span></pre></td></tr><tr><td scope="row"><pre>    fm = $.NSFileManager.defaultManager<span></span></pre></td></tr><tr><td scope="row"><pre>    exists = fm.fileExistsAtPathIsDirectory(path, ref)<span></span></pre></td></tr><tr><td scope="row"><pre>    if (exists) {<span></span></pre></td></tr><tr><td scope="row"><pre>        isDirectory = ref[0]<span></span></pre></td></tr><tr><td scope="row"><pre>        return (path + ' is ' + (isDirectory ? '' : 'not ') + 'a directory; ')<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre>    else {<span></span></pre></td></tr><tr><td scope="row"><pre>        return (path + ' does not exist\n')<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre>}<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>output = testExplicitPassByReference('/System')<span></span></pre></td></tr><tr><td scope="row"><pre>       + testExplicitPassByReference('/mach_kernel')<span></span></pre></td></tr><tr><td scope="row"><pre>       + testExplicitPassByReference('/foo')<span></span></pre></td></tr></table></div><p>Result: /System is a directory; /mach_kernel is not a directory; /foo does not exist</p></section><section><a name="//apple_ref/doc/uid/TP40014508-CH109-SW52" title="Ref"></a><h3 class="jump">Ref</h3><p>To access the byte values of <code>Ref</code> objects, index them into like arrays.</p><div class="codesample clear"><table><tr><td scope="row"><pre>ref = Ref('id*')<span></span></pre></td></tr><tr><td scope="row"><pre>ref[0] = $('foo')<span></span></pre></td></tr><tr><td scope="row"><pre>if (ref[0] == $('foo')) { ... }<span></span></pre></td></tr></table></div><p>When you need to pass an opaque pointer and check whether you got that opaque pointer back, you instantiate a void <code>Ref</code> and use the <code>equals</code> method.</p><div class="codesample clear"><table><tr><td scope="row"><pre>CONTEXT = Ref('void')<span></span></pre></td></tr><tr><td scope="row"><pre> <span></span></pre></td></tr><tr><td scope="row"><pre>ObjC.registerSubclass({<span></span></pre></td></tr><tr><td scope="row"><pre>    name: 'MyObject',<span></span></pre></td></tr><tr><td scope="row"><pre>    properties: { foo: 'id' },<span></span></pre></td></tr><tr><td scope="row"><pre>    methods: {<span></span></pre></td></tr><tr><td scope="row"><pre>        'startObserving': {<span></span></pre></td></tr><tr><td scope="row"><pre>            types: ['void', []],<span></span></pre></td></tr><tr><td scope="row"><pre>            implementation: function (obj) {<span></span></pre></td></tr><tr><td scope="row"><pre>                this.addObserverForKeyPathOptionsContext(<span></span></pre></td></tr><tr><td scope="row"><pre>                    this,<span></span></pre></td></tr><tr><td scope="row"><pre>                    'foo',<span></span></pre></td></tr><tr><td scope="row"><pre>                    ($.NSKeyValueObservingOptionNew | $.NSKeyValueObservingOptionOld),<span></span></pre></td></tr><tr><td scope="row"><pre>                    CONTEXT<span></span></pre></td></tr><tr><td scope="row"><pre>                );<span></span></pre></td></tr><tr><td scope="row"><pre>            },<span></span></pre></td></tr><tr><td scope="row"><pre>        },<span></span></pre></td></tr><tr><td scope="row"><pre>        'observeValueForKeyPath:ofObject:change:context:': {<span></span></pre></td></tr><tr><td scope="row"><pre>            types: ['void', ['id', 'id', 'id', 'void *']],<span></span></pre></td></tr><tr><td scope="row"><pre>            implementation: function(keyPath, observedObject, change, context) {<span></span></pre></td></tr><tr><td scope="row"><pre>                $.NSLog(Automation.getDisplayString(Ref.equals(context, CONTEXT)))<span></span></pre></td></tr><tr><td scope="row"><pre>            }<span></span></pre></td></tr><tr><td scope="row"><pre>        }<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre>})<span></span></pre></td></tr></table></div></section><section><a name="//apple_ref/doc/uid/TP40014508-CH109-SW29" title="Function Binding"></a><h3 class="jump">Function Binding</h3><p>When frameworks are imported, only the C functions specified in the bridge support files are made available. To access other C functions that are linked into the host application, a script may bind them into the JavaScript environment. Call the <code>bindFunction()</code> method and specify the return and argument types of the function.</p><div class="codesample clear"><table><tr><td scope="row"><pre>ObjC.bindFunction('pow', ['double', ['double', 'double']])<span></span></pre></td></tr><tr><td scope="row"><pre>$.pow(2,10)<span></span></pre></td></tr></table></div><p>Result: 1024</p></section><section><a name="//apple_ref/doc/uid/TP40014508-CH109-SW32" title="Types"></a><h3 class="jump">Types</h3><p>Here are some of the allowed strings for specifying types of properties, method and function arguments, and return values: <code>void</code>, <code>bool</code>, <code>float</code>, <code>double</code>, <code>unsigned char</code>, <code>char</code>, <code>unsigned short</code>, <code>short</code>, <code>unsigned int</code>, <code>int</code>, <code>unsigned long</code>, <code>long</code>, <code>long double</code>, <code>class</code>, <code>selector</code>, <code>string</code>, <code>pointer</code>, <code>block</code>, <code>function</code>, and <code>id</code>.</p><div class="notebox"><aside><a name="//apple_ref/doc/uid/TP40014508-CH109-SW53" title="Note"></a><p><strong>Note:</strong>&nbsp;Struct type names, such as <code>NSRect</code>, are allowed, but <code>id</code> must be used for objects, not actual class names.</p><p></p></aside></div></section><section><a name="//apple_ref/doc/uid/TP40014508-CH109-SW30" title="Subclassing"></a><h3 class="jump">Subclassing</h3><p>Subclasses of Objective-C objects can be registered from JavaScript.</p><div class="codesample clear"><table><tr><td scope="row"><pre>ObjC.registerSubclass({<span></span></pre></td></tr><tr><td scope="row"><pre>    name: 'AppDelegate',<span></span></pre></td></tr><tr><td scope="row"><pre>    superclass: 'NSObject',<span></span></pre></td></tr><tr><td scope="row"><pre>    protocols: ['NSApplicationDelegate'],<span></span></pre></td></tr><tr><td scope="row"><pre>    properties: {<span></span></pre></td></tr><tr><td scope="row"><pre>        window: 'id'<span></span></pre></td></tr><tr><td scope="row"><pre>    },<span></span></pre></td></tr><tr><td scope="row"><pre>    methods: {<span></span></pre></td></tr><tr><td scope="row"><pre>        'applicationDidFinishLaunching:': function (notification) {<span></span></pre></td></tr><tr><td scope="row"><pre>            $.NSLog('Application finished launching');<span></span></pre></td></tr><tr><td scope="row"><pre>        }<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre>})<span></span></pre></td></tr></table></div><p>If no superclass is given, the object will implicitly subclass <code>NSObject</code>. When you override a method, specifying the method types is optional, but if the types are present, they must match those of the superclass's method.</p><p>Here is an example of a custom <code>init</code> method and a custom method with its types declared.</p><div class="codesample clear"><table><tr><td scope="row"><pre>ObjC.registerSubclass({<span></span></pre></td></tr><tr><td scope="row"><pre>    name: 'MyClass',<span></span></pre></td></tr><tr><td scope="row"><pre>    properties: {<span></span></pre></td></tr><tr><td scope="row"><pre>        foo: 'id'<span></span></pre></td></tr><tr><td scope="row"><pre>    },<span></span></pre></td></tr><tr><td scope="row"><pre>    methods: {<span></span></pre></td></tr><tr><td scope="row"><pre>        init: function () {<span></span></pre></td></tr><tr><td scope="row"><pre>            var _this = ObjC.super(this).init;<span></span></pre></td></tr><tr><td scope="row"><pre>            if (_this != undefined) {<span></span></pre></td></tr><tr><td scope="row"><pre>                _this.foo = 'bar'<span></span></pre></td></tr><tr><td scope="row"><pre>            }<span></span></pre></td></tr><tr><td scope="row"><pre>            return _this<span></span></pre></td></tr><tr><td scope="row"><pre>        },<span></span></pre></td></tr><tr><td scope="row"><pre>        baz: {<span></span></pre></td></tr><tr><td scope="row"><pre>            types: ['void', []],<span></span></pre></td></tr><tr><td scope="row"><pre>            implementation: function () {<span></span></pre></td></tr><tr><td scope="row"><pre>                this.foo = 'quux'<span></span></pre></td></tr><tr><td scope="row"><pre>            }<span></span></pre></td></tr><tr><td scope="row"><pre>        }<span></span></pre></td></tr><tr><td scope="row"><pre>    }<span></span></pre></td></tr><tr><td scope="row"><pre>})<span></span></pre></td></tr></table></div><div class="importantbox clear"><aside><a name="//apple_ref/doc/uid/TP40014508-CH109-DontLinkElementID_3" title="Important"></a><p><strong>Important:</strong>&nbsp;DO NOT assign values to the <code>this</code> variable or any of its properties in <code>init</code> methods. Instead, use different variables (<code>_this</code> is used above) to initialize and return properties. In all other methods, use the standard <code>this</code> variable. In JavaScript, you are not allowed to reassign the <code>this</code> variable. Objective-C classes are allowed to return from their <code>init</code> methods a different object than that on which the method was called.</p><p></p></aside></div></section></section><section><a name="//apple_ref/doc/uid/TP40014508-CH109-SW54" title="Automation.getDisplayString()"></a><h2 class="jump">Automation.getDisplayString()</h2><p>The <code>Automation</code> object has a <code>getDisplayString</code> method that allows you to pass in an object and print it as source text or a human-readable display string.</p><div class="codesample clear"><table><tr><td scope="row"><pre>foo = $('bar')<span></span></pre></td></tr><tr><td scope="row"><pre>Automation.getDisplayString(foo)<span></span></pre></td></tr></table></div><p>Passing in <code>true</code> as the second parameter to <code>getDisplayString</code> will print the object as a display string instead of source text.</p><div class="codesample clear"><table><tr><td scope="row"><pre>Automation.getDisplayString(foo, true)<span></span></pre></td></tr></table></div></section>
        <div id="pageNavigationLinks_bottom" class="pageNavigationLinks">
            <a class='nextLink' rel='next' href='RevisionHistory.html'>Next</a><a class='previousLink' rel='prev' href='OSX10-11.html'>Previous</a>
        </div><br/>
        <div class="copyright"><br/><hr /><div align="center"><p class="content_text" lang="en" dir="ltr"> Copyright &#x00a9; 2015 Apple Inc. All Rights Reserved.  <a href="http://www.apple.com/legal/internet-services/terms/site.html" target="_blank">Terms of Use</a>   |  <a href="http://www.apple.com/privacy/" target="_blank">Privacy Policy</a>  |  Updated: 2015-09-16</p></div></div>

        <div id="pediaWindow">
            <div id="pediaHeader"></div>
            <div id="pediaBody"></div>
        </div>
    </article>

    <div id="blackout">
    <div id="preload"></div>
</div>
<div id="modal" aria-hidden="true">
    <div id="closebox" tabindex="0" aria-label="Close feedback form" role="button"></div>
    <div id="sending" class="hidden">
        <h2 tabindex="0">Sending feedback&hellip;</h2>
        <div id="sending_img"></div>
    </div>
    <div id="error" class="hidden">
        <h2 tabindex="0">We&rsquo;re sorry, an error has occurred.</h2>
        <p>Please try submitting your feedback later.</p>
        <div id="error_icon"></div>
    </div>
    <div id="success" class="hidden">
        <h2 tabindex="0">Thank you for providing feedback!</h2>
        <p>Your input helps improve our developer documentation.</p>
        <div id="thank_you_icon"></div>
    </div>
    
    <form id="feedback" action="#" method="post">
        <div class="left-leaf">
            <h2 id="helpful_title" data-asterisk="a1" tabindex="0">How helpful is this document?</h2>     
            <sup id="a1" class="asterisk" aria-hidden="true">*</sup>

            <div id="star_group" role="radiogroup" aria-required="true">
                <label> 
                    <input class="radio" type="radio" name="helped" value="1" /> 
                    Very helpful
                </label>
                <label> 
                    <input class="radio" type="radio" name="helped" value="2" /> 
                    Somewhat helpful
                </label>
                <label>
                    <input class="radio" type="radio" name="helped" value="3" /> 
                    Not helpful
                </label>
            </div>
        </div>
        <div class="right-leaf">
            <h2>How can we improve this document?</h2>
            <div id="improve" class="checkboxes">
                <label>
                    <input type="checkbox" name="typo" /> 
                    Fix typos or links
                </label>
                <label>
                    <input type="checkbox" name="infoIncorrect" /> 
                    Fix incorrect information
                </label>
                <label>
                    <input type="checkbox" name="needs_examples" /> 
                    Add or update code samples
                </label>
                <label>
                    <input type="checkbox" name="needs_art" /> 
                    Add or update illustrations
                </label>
                <label>
                    <input type="checkbox" name="missingInfo" /> 
                    Add information about...
                </label>
            </div>
        </div>

        <textarea id="comment" name="problem" cols="70" rows="8" placeholder="Please tell us more about your experience with this document" data-asterisk="a2" required></textarea>
        <sup id="a2" class="asterisk" aria-hidden="true">*</sup>

        <p class="fineprint">
            <em aria-hidden="true"><span>*</span> Required information</em>
        </p> 

        <input id="submit" type="button" value="Send" />

        <section id="legal">
            <p>
                To submit a product bug or enhancement request, please visit the 
                <a href="https://developer.apple.com/bugreporter/" target="_blank">Bug Reporter</a> 
                page.
            </p>
            <p>
                Please read <a href="http://www.apple.com/legal/policies/ideas.html" target="_blank">Apple's Unsolicited Idea Submission Policy</a> 
                before you send us your feedback.
            </p> 
        </section>
    </form>
</div>

    
    <script charset="utf-8" src="../../../../Resources/1282/JavaScript/lib/prototype.js"></script>
    <script src="../../../../Resources/1282/JavaScript/library.js"></script>
</body>
</html>
